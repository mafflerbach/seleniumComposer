<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Selenium Composer</title>
    <script src="node_modules/material-design-lite/material.min.js"></script>


    <link rel="stylesheet" href="node_modules/material-design-lite/material.min.css"/>
    <link rel="stylesheet" href="assets/css/terminal.css"/>


    <link rel="import" href="assets/sections/buttons.xml"/>
    <link rel="import" href="assets/sections/terminal.xml"/>

  </head>
  <body>






    <main class="content js-content"></main>
  </body>

  <script src="assets/js/import.js"></script>
  <script src="assets/js/selenium/selenium.js"></script>
  <script src="assets/js/selenium/api.js"></script>
  <script src="assets/js/dependencie.js"></script>
  <script>
    intervalStatus = false;

    $(document).ready(function () {
      var selenium = new Selenium('http://localhost:4444');
      $('button[data-browser]').click(function () {
        var command = $(this).data('command');
        var browser = $(this).data('browser');
        if (command == 'run') {
          selenium.start(browser);
          $('button[data-browser="' + browser + '"][data-command="stop"]').show();
          $(this).hide();
        }
        if (command == 'stop') {
          selenium.stop(browser);
          $('button[data-browser="' + browser + '"][data-command="run"]').show();
          $(this).hide();
        }
        if(intervalStatus == false) {
          intervalManager(true);
        }
      })
    })

    function intervalManager(activate) {
      intervalStatus =  activate;
      if (activate) {
        updateControls = setInterval(function () {
          var selenium = new Selenium('http://localhost:4444');
          selenium.updateControls($('button'));
        }, 5000);
      } else {
        clearInterval(updateControls);
      }
    }

  </script>

</html>